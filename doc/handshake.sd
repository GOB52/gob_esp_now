# https://sequencediagram.org/
title gob_esp_now P2P handshake(RUDP)

bottomparticipants

participant DeviceA
participant DeviceB
participant DeviceC
participant Unrelated Devices

aboxright over DeviceA,Unrelated Devices: Declare primary. Broadcast SYN
note over DeviceB:add peer A
space -5.3
note over DeviceC:add peer A

DeviceC->>DeviceA:Declare secondary
note over DeviceA:add peer C
DeviceB->>DeviceA:Declare secondary
note over DeviceA:add peer B

note over DeviceA:Starting with these members.

aboxright over DeviceA,DeviceC:Secondary list to all peers

note over DeviceB:add peer C
space -5.3
note over DeviceC:add peer B

DeviceB->>DeviceA:ACK
DeviceC->>DeviceA:ACK
DeviceB->>DeviceC:ACK
DeviceC->>DeviceB:ACK
